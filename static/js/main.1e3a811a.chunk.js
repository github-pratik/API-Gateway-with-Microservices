(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),c=a.n(l),o=a(4),s=a(1);const m="https://cors-anywhere.herokuapp.com/https://apigatewaywithmicroservice-n8fjeaouz-github-pratiks-projects.vercel.app",i=()=>{const e=localStorage.getItem("token");return{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},u=async(e,t)=>{try{const n=await fetch("".concat(m,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:e,password:t})}),r=await n.json();if(!n.ok)throw new Error(r.error||"Login failed");return r}catch(a){throw console.error("Login error:",a),a}},d=async(e,t,a)=>{try{const r=await fetch("".concat(m,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({username:e,password:t,email:a})}),l=await r.json();if(!r.ok)throw new Error(l.error||"Registration failed");return l}catch(n){throw console.error("Registration error:",n),n}},p=async()=>{return(await fetch("".concat(m,"/products/products"),{headers:i()})).json()},E=async e=>{return(await fetch("".concat(m,"/products/products"),{method:"POST",headers:i(),body:JSON.stringify(e)})).json()},b=async()=>{return(await fetch("".concat(m,"/orders/orders"),{headers:i()})).json()},h=async e=>{return(await fetch("".concat(m,"/orders/orders"),{method:"POST",headers:i(),body:JSON.stringify(e)})).json()},v=async()=>{return(await fetch("".concat(m,"/users/users"),{headers:i()})).json()};var g=function(e){let{onLogin:t,onToggle:a}=e;const[l,c]=Object(n.useState)(""),[o,s]=Object(n.useState)(""),[m,i]=Object(n.useState)("");return r.a.createElement("div",{className:"card p-4 mx-auto",style:{maxWidth:"400px"}},r.a.createElement("h2",{className:"text-center mb-4"},"Login"),m&&r.a.createElement("div",{className:"alert alert-danger"},m),r.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),i("");try{const{token:e}=await u(l,o);t(e)}catch(m){i("Invalid credentials"),console.error("Login failed:",m)}}},r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",value:l,onChange:e=>c(e.target.value),required:!0})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:o,onChange:e=>s(e.target.value),required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary w-100 mb-3"},"Login"),r.a.createElement("button",{type:"button",className:"btn btn-link w-100",onClick:a},"Need an account? Register")))},y=a(3);var N=function(){const[e,t]=Object(n.useState)([]),[a,l]=Object(n.useState)({name:"",description:"",price:"",stock:""});Object(n.useEffect)(()=>{c()},[]);const c=async()=>{try{const a=await p();t(a)}catch(e){alert("Failed to load products")}};return r.a.createElement("div",null,r.a.createElement("h2",null,"Products"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Stock"))),r.a.createElement("tbody",null,e.map(e=>r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.description),r.a.createElement("td",null,"$",e.price),r.a.createElement("td",null,e.stock)))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{await E(a),c(),l({name:"",description:"",price:"",stock:""})}catch(t){alert("Failed to create product")}}},r.a.createElement("h4",null,"Add New Product"),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Name",value:a.name,onChange:e=>l(Object(y.a)(Object(y.a)({},a),{},{name:e.target.value}))})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Description",value:a.description,onChange:e=>l(Object(y.a)(Object(y.a)({},a),{},{description:e.target.value}))})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Price",value:a.price,onChange:e=>l(Object(y.a)(Object(y.a)({},a),{},{price:e.target.value}))})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Stock",value:a.stock,onChange:e=>l(Object(y.a)(Object(y.a)({},a),{},{stock:e.target.value}))})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Add Product")))))};var f=function(){const[e,t]=Object(n.useState)([]),[a,l]=Object(n.useState)([]),[c,o]=Object(n.useState)({product_id:"",quantity:1});Object(n.useEffect)(()=>{s(),m()},[]);const s=async()=>{try{const a=await b();t(a)}catch(e){alert("Failed to load orders")}},m=async()=>{try{const t=await p();l(t)}catch(e){alert("Failed to load products")}};return r.a.createElement("div",null,r.a.createElement("h2",null,"Orders"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Order ID"),r.a.createElement("th",null,"Total Amount"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Created At"))),r.a.createElement("tbody",null,e.map(e=>r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,"$",e.total_amount),r.a.createElement("td",null,e.status),r.a.createElement("td",null,new Date(e.created_at).toLocaleString())))))),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("form",{onSubmit:async e=>{e.preventDefault();try{const e=a.find(e=>e.id===parseInt(c.product_id));await h({user_id:1,items:[{product_id:parseInt(c.product_id),quantity:parseInt(c.quantity),price:e.price}]}),s(),o({product_id:"",quantity:1})}catch(t){alert("Failed to create order")}}},r.a.createElement("h4",null,"Create New Order"),r.a.createElement("div",{className:"mb-3"},r.a.createElement("select",{className:"form-control",value:c.product_id,onChange:e=>o(Object(y.a)(Object(y.a)({},c),{},{product_id:e.target.value}))},r.a.createElement("option",{value:""},"Select Product"),a.map(e=>r.a.createElement("option",{key:e.id,value:e.id},e.name," - $",e.price)))),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"number",className:"form-control",placeholder:"Quantity",min:"1",value:c.quantity,onChange:e=>o(Object(y.a)(Object(y.a)({},c),{},{quantity:e.target.value}))})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Create Order")))))};var w=function(){const[e,t]=Object(n.useState)([]);Object(n.useEffect)(()=>{a()},[]);const a=async()=>{try{const a=await v();t(a)}catch(e){alert("Failed to load users")}};return r.a.createElement("div",null,r.a.createElement("h2",null,"Users"),r.a.createElement("div",{className:"table-responsive"},r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Created At"))),r.a.createElement("tbody",null,e.map(e=>r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.email),r.a.createElement("td",null,new Date(e.created_at).toLocaleString())))))))};var j=function(){const e=Object(s.q)();return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement(o.b,{className:"navbar-brand",to:"/"},"Microservices Demo"),r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(o.b,{className:"nav-link",to:"/products"},"Products"),r.a.createElement(o.b,{className:"nav-link",to:"/orders"},"Orders"),r.a.createElement(o.b,{className:"nav-link",to:"/users"},"Users"),r.a.createElement("button",{className:"btn btn-outline-light ms-2",onClick:()=>{localStorage.removeItem("token"),e("/login")}},"Logout"))))};var O=function(e){let{onToggle:t}=e;const[a,l]=Object(n.useState)(""),[c,o]=Object(n.useState)(""),[s,m]=Object(n.useState)("");return r.a.createElement("div",{className:"card p-4 mx-auto",style:{maxWidth:"400px"}},r.a.createElement("h2",{className:"text-center mb-4"},"Register"),s&&r.a.createElement("div",{className:"alert alert-danger"},s),r.a.createElement("form",{onSubmit:async e=>{e.preventDefault(),m("");try{const e=await d(a,c);e.message?(alert("Registration successful! Please login."),t()):m(e.error||"Registration failed")}catch(s){m("Registration failed"),console.error("Registration error:",s)}}},r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"Username",value:a,onChange:e=>l(e.target.value),required:!0})),r.a.createElement("div",{className:"mb-3"},r.a.createElement("input",{type:"password",className:"form-control",placeholder:"Password",value:c,onChange:e=>o(e.target.value),required:!0})),r.a.createElement("button",{type:"submit",className:"btn btn-primary w-100 mb-3"},"Register"),r.a.createElement("button",{type:"button",className:"btn btn-link w-100",onClick:t},"Already have an account? Login")))};var S=function(){const[e,t]=Object(n.useState)(localStorage.getItem("token")),[a,l]=Object(n.useState)(!1),c=()=>{l(!a)};return r.a.createElement(o.a,null,e&&r.a.createElement(j,null),r.a.createElement("div",{className:"container mt-4"},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login",element:e?r.a.createElement(s.a,{to:"/products"}):a?r.a.createElement(O,{onToggle:c}):r.a.createElement(g,{onLogin:e=>{localStorage.setItem("token",e),t(e)},onToggle:c})}),r.a.createElement(s.b,{path:"/products",element:e?r.a.createElement(N,null):r.a.createElement(s.a,{to:"/login"})}),r.a.createElement(s.b,{path:"/orders",element:e?r.a.createElement(f,null):r.a.createElement(s.a,{to:"/login"})}),r.a.createElement(s.b,{path:"/users",element:e?r.a.createElement(w,null):r.a.createElement(s.a,{to:"/login"})}),r.a.createElement(s.b,{path:"/",element:r.a.createElement(s.a,{to:"/login"})}))))};a(16);c.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)))},8:function(e,t,a){e.exports=a(17)}},[[8,1,2]]]);
//# sourceMappingURL=main.1e3a811a.chunk.js.map